@require '../../vars'

$maxColumns = 2
$columnMin = 320px
$pinnedBlockWidth = 300px

.z-dashboard
  flex1()
  background: getColor('$bgColorAlt1')
  overflow: auto
  -webkit-overflow-scrolling: touch

  &.is-menu-visible
    > .menu > .dashboards
      display: block

    > .content > .top > .name > .arrow
        border-top: none
        border-bottom: 5px solid getColor('$primaryMain')

  &.is-hack-club // FIXME: non-hardcoded
    > .menu
      background-image: url('https://assets.hackclub.com/flag-orpheus-top.svg')
      background-size: 116px auto
      background-repeat: no-repeat
      background-position: 30px 0
      min-height: 48px

      > .logo
        display: none

  > .menu
    background: getColor('$bgColor')
    padding: 16px 16px 0 16px
    border-right: 1px solid getColor('$bgText12')
    display: flex
    flex-direction: column

    > .logo
      font-h4()
      font-weight: 700
      color: getColor('$primaryMain')
      margin: 0 12px

      > .data
        color: getColor('$bgText54')

    > .title
      font-h5()
      margin: 48px 12px 0 12px
      display: none

      > .icon
        width: 22px
        height: 21px
        background: url($cdnUrl + '/techby/impact/chart.svg')
        margin-right: 12px
        margin-top: 2px

    > .dashboards
      margin-top: 24px
      display: none

      > .dashboard
        font-subtitle2()
        padding: 12px
        display: block
        border-radius: 6px

        &:hover
          background: getColor('$bgColorAlt1')

        &.is-selected
          background: getColor('$primaryMain8')
          color: getColor('$primaryMain')

    > .donate
      display: none
      margin-top: auto
      padding: 0 24px 24px 24px
      background: getColor('$bgColorAlt1')
      border: 1px solid getColor('$bgText12')
      border-radius: 20px
      text-align: center
      overflow: hidden

      > .image
        width: 109px
        height: 132px
        margin: -4px auto 0 auto

      > .text
        font-subtitle1(medium)
        margin-top: 20px
        margin-bottom: 20px

  > .content
    > .top
      padding: 24px 30px
      background: getColor('$bgColor')
      border-bottom: 1px solid getColor('$bgText12')

      > .sup
        font-subtitle2(medium)

      > .name
        font-h5()
        position: relative
        display: inline-block
        padding-right: 24px

        > .arrow
          position: absolute
          bottom: 12px
          right: 4px
          width: 0
          height: 0
          border-left: 5px solid transparent
          border-right: 5px solid transparent
          border-top: 5px solid getColor('$primaryMain')

    > .data
      padding: 32px

      > .custom-message
        font-body1()
        margin-bottom: 32px
        display: flex
        align-items: center

        > .icon
          margin-right: 20px
          border: 2px solid getColor('$bgText')
          border-radius: 50%
          padding: 6px

        > .text
          > .link
            font-subtitle1()
            text-decoration: underline

      > .filters
        display: flex
        overflow-x: auto
        -webkit-overflow-scrolling: touch
        margin-right: -32px

        > .time-scale
          margin-top: 0
          margin-left: 20px

        > .spinner
          margin-left: 24px
          margin-top: 4px

      > .pinned-block
        margin-bottom: 16px

      // > .blocks
      //   // https://stackoverflow.com/a/54907809
      //   // max 3 columns, but if they get smaller than $columnMin, reduce # of cols
      //   @media (min-width: $columnMin * $maxColumns)
      //     --repeat: $maxColumns

      //   display: grid
      //   grid-template-columns: repeat(var(--repeat, auto-fit), minmax($columnMin , 1fr))
      //   grid-gap: 20px

  @media (min-width: $breakPointMedium)
    display: grid
    grid-template-columns: 280px 1fr

    > .menu
      padding: 32px 12px

      > .title
        display: flex

      > .dashboards
        display: block

      > .donate
        display: block

    > .content
      min-height: 0
      display: flex
      flex-direction: column

      > .top
        > .name
          > .arrow
            display: none

      > .data
        display: grid
        grid-template: 'custom-message custom-message' 'filters filters' 'blocks pinned-block' 'blocks .'
        grid-template-columns: 1fr $pinnedBlockWidth
        grid-column-gap: 32px
        overflow: auto
        -webkit-overflow-scrolling: touch

        > .custom-message
          grid-area: custom-message

        > .filters
          grid-area: filters
          overflow: visible
          margin-bottom: 32px

        > .pinned-block
          grid-area: pinned-block
          position: sticky
          top: 0
          width: $pinnedBlockWidth
          margin-bottom: 0

        > .blocks
          // flex1()
          grid-area: blocks

